<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../src/exindex.css">
    <title>Listado</title>
</head>
<body>
    <header>
        <div class="contenedor-logo-center" id="logo">
            
            <h4>Asia</h4>
            <h6>Indumentaria</h6>
            <span>I N T R A N E T</span>
            <br>
            <div class="menu-horiz-admin">
                <ul>
                    <li><a href="index.html">Tienda</a></li>
                    <li><a href="exindex.html">ABM</a></li>
                    <li><a href="altas.html">Altas</a></li>
                    <li><a href="modificaciones.html">Modificaciones</a></li>
                    <li><a href="listadoEliminar.html">Bajas</a></li>
                </ul>

            </div>
          
           
        </div>
    </header>
     <span><center>  Listado de Productos </center> </span>
    <div class="logo-centrado">
        
    </div>
    <table>
        <thead>
            <tr>
                <th>C칩digo</th>
                <th>titulo</th>
                <th>Descripci칩n</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Im치gen</th>
            </tr>
        </thead>
        <tbody id="tablaProductos"></tbody>
    </table><br>

    

    <script>
        //const URL = "http://127.0.0.1:5000/"

        //const URL = "https://USUARIO.pythonanywhere.com/"

        const URL = 'https://g4bynach0.pythonanywhere.com/';

        // Solicitud GET al servidor para ver todos los prod
        fetch(URL + 'productos')
            .then(function(response) {
                if (response.ok) {
                    return response.json();
                } else {
                    throw new Error ('Error al obtener los productos');
                }
            })

            .then(function(data) {
                let tablaProductos = document.getElementById('tablaProductos');
                //(selecciona el elemento de DOM donde mostrar치 los productos)
            for (let producto of data) {
                let fila = document.createElement('tr');
                fila.innerHTML = '<td>'+ producto.codigo + '</td>' +
                    '<td>'+ producto.titulo + '</td>' +
                    '<td>'+ producto.descripcion + '</td>' +
                    '<td align="right">'+ producto.cantidad + '</td>' +
                    '<td align="right">'+ producto.precio + '</td>' +
                    //'<td><img src="./src/imgs/'+ producto.imagen_url + '" alt="Imagen" style="width:100px;"></td>';
                    '<td><img src=https://www.pythonanywhere.com/user/g4bynach0/files/home/g4bynach0/mysite/src/imgs/' + producto.imagen_url +' alt="Imagen del producto"style="width: 100px;"></td>' +

        //Para subirlo al servidor, cambiar la ruta de la imagen por:
        //www.pythonanywhere.com/user/USUARIO/files/home/USUARIO/mysite/etc...
        tablaProductos.appendChild(fila);
    }
})

            .catch(function(error) {
                alert('Error al obtener los productos');
            });
    </script>
    
</body>
</html>